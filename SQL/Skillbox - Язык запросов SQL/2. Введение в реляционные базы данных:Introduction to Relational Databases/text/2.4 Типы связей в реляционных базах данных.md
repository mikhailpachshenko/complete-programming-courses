## 2.4 Типы связей в реляционных базах данных

### Связи между таблицами

- Связь типа ***"один ко многим"*** — one-to-many

  - Могут соединять одну запись из 1-ой таблицы с несколькими записями во второй

    - **Авторы**

      | id   | name            |
      | ---- | --------------- |
      | 1    | Борис Акунин    |
      | 2    | Теодор Драйзер  |
      | 3    | Михаил Булгаков |

    - **Книги**

      | id   | name            | author_id |
      | ---- | --------------- | --------- |
      | 1    | Левиафан        | 1         |
      | 2    | Чёрный город    | 1         |
      | 3    | Финансист       | 2         |
      | 4    | Азазель         | 1         |
      | 5    | Собачье сердце  | 3         |
      | 6    | "Белая гвардия" | 3         |

 Первая запись из таблицы "Авторы" — 1 Борис Акунин упоминается в 3 записях из таблицы "Книги".

- Так же по такому типу связи Таблица может быть связанна с сама собой 

  - Если в таблице хранится дерево категорий книг то имеет смысл добавить в неё поле которое будет ссылаться на эту же таблицу

    - Категории книг

      | id   | parent_id | name              |
      | ---- | --------- | ----------------- |
      | 1    | NULL      | Электронные книги |
      | 2    | 1         | Лёгкое чтение     |
      | 3    | 1         | Серьёзное чтение  |
      | 4    | 2         | Детективы         |
      | 5    | 2         | Боевики           |
      | 6    | NULL      | Аудиокниг         |

    NULL — категория в поле **parent_id** означает что категория самая корневая, выше нет значений 

------

- Связь типа ***"один к одному"*** — one-to-one

  - Страны

    | id   | name      | capital_id |
    | ---- | --------- | ---------- |
    | 1    | Аргентина | 1          |
    | 2    | Беларусь  | 2          |
    | 3    | Германия  | 3          |
    | 4    | Зимбабве  | 4          |
    | 5    | Россия    | 5          |
    | 6    | США       | 6          |

  - Столицы

    | id   | name         |
    | ---- | ------------ |
    | 1    | Буэнос-Айрес |
    | 2    | Минск        |
    | 3    | Берлин       |
    | 4    | Хераре       |
    | 5    | Москва       |
    | 6    | Вашингтон    |

В таблице "Столицы" сделать первое поле (id поле) уникальным что бы запись в нем встречалась только один раз. Для этого его можно пометить как **UNIQUE**

------

- Связь типа **"Многие ко многим"** — many-to-many

  - Книги

    | id   | name         |
    | ---- | ------------ |
    | 56   | Левиафан     |
    | 211  | Чёрный город |
    | 388  | Финансист    |

  - Заказы

    | id   | time                |
    | ---- | ------------------- |
    | 76   | 2021-10-15 18:36:02 |
    | 1288 | 2021-10-28 13:11:01 |
    | 3642 | 2021-11-02 12:01:19 |

Для реализации таких с вязей необходимо создавать отдельную таблицу

- book2order

  - | id   | book_id | order_id |
    | ---- | ------- | -------- |
    | 261  | 56      | 76       |
    | 315  | 211     | 76       |
    | 402  | 211     | 1288     |